<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aut√≥mata Lustig-IA</title>
    <meta name="description" content="Automatizaci√≥n de gesti√≥n de cartera con IA avanzada. Por Victor Lustig."/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@200;300;400&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#00ff41",
                        textblue: "#00bfff",
                    },
                    fontFamily: {
                        display: ["'Share Tech Mono'", "monospace"],
                    }
                }
            }
        };
    </script>
    <style>
        body { margin:0; overflow:hidden; background:#000; height:100vh; }
        .energy-core {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0,255,65,1) 0%, rgba(0,255,65,0.6) 25%, rgba(0,255,65,0.25) 45%, rgba(0,255,65,0.05) 65%, transparent 70%);
            box-shadow: 0 0 40px rgba(0,255,65,0.9), 0 0 90px rgba(0,255,65,0.6);
            animation: pulseCore 4s ease-in-out infinite;
        }
        @keyframes pulseCore { 0%,100% { transform:scale(1); } 50% { transform:scale(1.08); } }
        .point { position:absolute; background:#00ff41; border-radius:50%; box-shadow:0 0 10px #00ff41; }
        .point-cloud { animation:rotateSphere 40s linear infinite; transform-style:preserve-3d; }
        @keyframes rotateSphere { from{transform:rotateY(0) rotateX(0);} to{transform:rotateY(360deg) rotateX(360deg);} }
        .glitch-hover:hover { animation:glitch 0.3s infinite; color:#00ff41; }
        @keyframes glitch { 0%{transform:translate(0)} 20%{transform:translate(-3px,3px)} 40%{transform:translate(3px,-3px)} 60%{transform:translate(-3px,3px)} 80%{transform:translate(3px,-3px)} 100%{transform:translate(0)} }
        
        #chtl-inline-bot {
            display:none;
            width:380px;
            height:520px;
            position:fixed;
            bottom:90px;
            left:16px;
            z-index:1000;
            background:rgba(0,0,0,0.95);
            border:2px solid #00ff41;
            border-radius:8px;
            box-shadow:0 0 30px rgba(0,255,65,0.5);
            overflow:hidden;
        }
        
        /* FORZAR que el chat de Chatling est√© dentro del contenedor */
        #chtl-inline-bot iframe,
        #chtl-inline-bot > div {
            width:100% !important;
            height:100% !important;
            border:none !important;
            position:relative !important;
            max-width:100% !important;
            max-height:100% !important;
        }
        
        /* Ocultar el widget flotante original de Chatling */
        #chtl-widget-container,
        [id*="chtl"][id*="widget"]:not(#chtl-inline-bot) {
            display:none !important;
        }
        
        #icarus-menu { 
            display:none; 
            position:fixed; 
            top:60px; 
            right:16px; 
            background:rgba(0,0,0,0.95); 
            border:2px solid #00ff41; 
            border-radius:8px; 
            padding:16px; 
            z-index:1000; 
            box-shadow:0 0 30px rgba(0,255,65,0.5); 
            min-width:320px; 
            max-height:80vh; 
            overflow-y:auto; 
        }
        #icarus-menu h3 { 
            color:#00ff41; 
            font-size:12px; 
            margin:16px 0 8px 0; 
            text-transform:uppercase; 
            letter-spacing:2px; 
            opacity:0.7; 
            border-bottom:1px solid rgba(0,255,65,0.3); 
            padding-bottom:4px; 
        }
        #icarus-menu h3:first-child { margin-top:0; }
        #icarus-menu ul { list-style:none; margin:0; padding:0; }
        #icarus-menu li { 
            padding:8px 14px; 
            border-bottom:1px solid rgba(0,255,65,0.1); 
            cursor:pointer; 
            transition:all 0.3s; 
            font-size:13px; 
        }
        #icarus-menu li:hover { background:rgba(0,255,65,0.15); color:#00ff41; }
        #icarus-menu li:last-child { border-bottom:none; }
        #icarus-menu li.status-done { color:#00ff41; }
        #icarus-menu li.status-done::before { content:"‚úì "; }
        #icarus-menu li.status-progress::before { content:"‚è≥ "; color:#00bfff; }
        #icarus-menu li.status-planned::before { content:"‚óã "; opacity:0.5; }
        
        .modal-overlay { 
            display:none; 
            position:fixed; 
            inset:0; 
            background:rgba(0,0,0,0.9); 
            z-index:2000; 
            align-items:center; 
            justify-content:center; 
        }
        .modal-content { 
            background:#000; 
            border:2px solid #00ff41; 
            border-radius:8px; 
            padding:32px; 
            max-width:420px; 
            width:92%; 
            box-shadow:0 0 50px rgba(0,255,65,0.8); 
            position:relative; 
        }
        .modal-close { 
            position:absolute; 
            top:12px; 
            right:16px; 
            font-size:32px; 
            cursor:pointer; 
            color:#00ff41; 
            transition:all 0.3s; 
        }
        .modal-close:hover { transform:scale(1.2); }
        .form-input { 
            width:100%; 
            padding:12px; 
            margin:12px 0; 
            background:rgba(0,255,65,0.05); 
            border:1px solid #00ff41; 
            border-radius:4px; 
            color:#fff; 
            font-family:'Share Tech Mono', monospace; 
        }
        .form-input:focus { outline:none; box-shadow:0 0 10px rgba(0,255,65,0.5); }
        .form-button { 
            width:100%; 
            padding:14px; 
            margin-top:20px; 
            background:#00ff41; 
            color:#000; 
            border:none; 
            border-radius:4px; 
            font-family:'Share Tech Mono', monospace; 
            font-weight:bold; 
            cursor:pointer; 
            transition:all 0.3s; 
        }
        .form-button:hover { box-shadow:0 0 20px rgba(0,255,65,0.9); transform:scale(1.02); }
        
        .whatsapp-float { position:fixed; bottom:90px; right:16px; z-index:999; }
        .whatsapp-float a { 
            display:flex; 
            align-items:center; 
            gap:8px; 
            background:#25D366; 
            color:#fff; 
            padding:12px 20px; 
            border-radius:50px; 
            text-decoration:none; 
            font-family:'Share Tech Mono', monospace; 
            font-size:14px; 
            box-shadow:0 4px 15px rgba(37,211,102,0.4); 
            transition:all 0.3s; 
        }
        .whatsapp-float a:hover { transform:scale(1.05); box-shadow:0 6px 20px rgba(37,211,102,0.6); }
    </style>
</head>
<body class="relative flex items-center justify-center h-screen w-screen text-white font-display">
    
    <!-- Logo Lustig superior izquierda -->
    <div class="absolute top-8 left-8 z-30 flex items-center gap-3">
        <div class="w-14 h-14 rounded-full bg-primary/20 flex items-center justify-center border border-primary/50 shadow-[0_0_15px_rgba(0,255,65,0.6)]">
            <span class="text-xl font-bold text-primary">Lustig</span>
        </div>
    </div>

    <!-- IcarusIA Pre-Venta superior derecha -->
    <div class="absolute top-8 right-8 z-30 opacity-90 text-sm tracking-widest text-primary cursor-pointer hover:opacity-100 transition" onclick="toggleIcarusMenu()">
        IcarusIA <span class="text-[10px] opacity-70">PRE-VENTA</span> <span class="text-xs bg-primary/30 px-2 py-1 rounded-full">-30%</span>
    </div>

    <!-- Men√∫ desplegable IcarusIA -->
    <div id="icarus-menu">
        <h3>üöÄ En Desarrollo</h3>
        <ul class="text-sm text-white">
            <li class="status-done">Anchor Points</li>
            <li class="status-done">Verbal Reasoning Engine</li>
            <li class="status-done">Self-Refinement Loop</li>
            <li class="status-done">Cognitive Guardrails (ABCD)</li>
            <li class="status-progress">Parallel Decoding</li>
            <li class="status-progress">Robust Coreference</li>
            <li class="status-planned">Thread Rot Prevention</li>
            <li class="status-planned">Active Classification</li>
        </ul>

        <h3>üß† Knowledge System</h3>
        <ul class="text-sm text-white">
            <li class="status-progress">Inner Thoughts Processing</li>
            <li class="status-progress">Breadcrumbs Navigation</li>
            <li class="status-planned">Knowledge Graph Integration</li>
            <li class="status-planned">Memory Management System</li>
            <li class="status-planned">Manual Refresh System</li>
        </ul>

        <h3>üìû Sales Agent (IcarusIA)</h3>
        <ul class="text-sm text-white">
            <li class="status-progress">Voice Synthesis (TTS)</li>
            <li class="status-progress">Speech Recognition (STT)</li>
            <li class="status-progress">Twilio Webhook Handler</li>
            <li class="status-progress">WhatsApp Business API</li>
            <li class="status-planned">Sales Script Engine</li>
            <li class="status-planned">Objection Handling AI</li>
        </ul>

        <h3>üè¢ Enterprise</h3>
        <ul class="text-sm text-white">
            <li class="status-planned">CRM / ERP Integration</li>
            <li class="status-planned">WAIS Tests Framework</li>
            <li class="status-planned">Multi-Agent Orchestration</li>
            <li class="status-planned">Real-time Analytics Dashboard</li>
            <li class="status-planned">Feedback Learning Loop</li>
        </ul>

        <div style="margin-top:16px; padding-top:12px; border-top:1px solid rgba(0,255,65,0.3);">
            <button onclick="openPreVentaStripe()" class="form-button" style="margin:0; padding:10px;">
                RESERVAR AHORA (-30%) 17 Licencias Restantes
            </button>
        </div>
    </div>

    <!-- Esfera central con n√∫cleo pulsante -->
    <div class="relative w-full h-full max-w-5xl max-h-screen flex items-center justify-center pointer-events-none">
        <div class="energy-core"></div>
        <div class="point-cloud w-0 h-0 relative" id="pointCloud"></div>
        <h1 class="absolute z-10 text-center pointer-events-none">
            <span class="block text-5xl md:text-7xl tracking-[0.4em] text-textblue drop-shadow-[0_0_20px_rgba(0,191,255,0.9)]">
                Œë·ΩêœÑœåŒºŒ±œÑŒ± Lustig-IA
            </span>
            <span class="block text-xl md:text-2xl mt-4 tracking-widest text-primary opacity-90">
                Analista de Ventas y Cuentas por Cobrar
            </span>
        </h1>
    </div>

    <!-- Contenedor del chat inline -->
    <div id="chtl-inline-bot"></div>

    <!-- Bot√≥n flotante WhatsApp -->
    <div class="whatsapp-float">
        <a href="https://wa.me/528130929276?text=Hola%20Lustig-IA%2C%20quiero%20informaci√≥n" target="_blank">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            WhatsApp
        </a>
    </div>

    <!-- Modal formulario Contacto -->
    <div id="contacto-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'contacto-modal')">
        <div class="modal-content">
            <span class="modal-close" onclick="closeContactoForm()">&times;</span>
            <h2 class="text-2xl text-primary text-center mb-6 tracking-widest">Contacto</h2>
            <form id="contacto-form" onsubmit="handleContactoSubmit(event)">
                <input type="text" name="nombre" placeholder="NOMBRE COMPLETO" class="form-input" required />
                <input type="email" name="email" placeholder="EMAIL" class="form-input" required />
                <input type="tel" name="telefono" placeholder="TEL√âFONO" class="form-input" required />
                <textarea name="mensaje" placeholder="MENSAJE (OPCIONAL)" class="form-input" rows="3"></textarea>
                <button type="submit" class="form-button">ENVIAR</button>
            </form>
            <p class="text-center text-xs text-primary/70 mt-4">Te contactaremos a la brevedad</p>
        </div>
    </div>

    <!-- Modal Pre-Venta IcarusIA -->
    <div id="preventa-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'preventa-modal')">
        <div class="modal-content">
            <span class="modal-close" onclick="closePreVentaModal()">&times;</span>
            <h2 class="text-2xl text-primary text-center mb-4 tracking-widest">PRE-VENTA ICARUSIA</h2>
            <p class="text-center text-primary/80 mb-2">Agente de Ventas con IA</p>
            <p class="text-center text-3xl text-primary mb-4">$480 MXN <span class="text-sm line-through opacity-50">$686</span></p>
            <ul class="text-sm text-primary/70 mb-6 space-y-2">
                <li>‚úì Llamadas automatizadas</li>
                <li>‚úì WhatsApp Business integrado</li>
                <li>‚úì Manejo de objeciones con IA</li>
                <li>‚úì Dashboard de m√©tricas</li>
                <li>‚úì Soporte prioritario</li>
            </ul>
            <div id="stripe-checkout" class="text-center">
                <a href="https://buy.stripe.com/4gMfZh8FY2jqd9GfxmbQY00" target="_blank" class="form-button inline-block text-lg py-4 text-center no-underline">
                    COMPRAR AHORA (-30%)
                </a>
                <p class="text-xs text-primary/60 mt-6">
                    Pago seguro v√≠a Stripe ‚Ä¢ Acceso inmediato
                </p>
            </div>
        </div>
    </div>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Funciones JavaScript -->
    <script>
        const stripe = Stripe('pk_test_51RoVJZDXgX8h2eEZPHB1jPbl4sRF44Rx17gRBNF6KEbwfvkmSPMem4hGGqyqLpjihv2Epm8G8OKPTaMhTDT4eTGj00LygWLDGh');

        function toggleIcarusMenu() {
            const menu = document.getElementById('icarus-menu');
            menu.style.display = menu.style.display === 'none' || menu.style.display === '' ? 'block' : 'none';
        }

        function openContactoForm() {
            document.getElementById('contacto-modal').style.display = 'flex';
        }

        function closeContactoForm() {
            document.getElementById('contacto-modal').style.display = 'none';
        }

        function openPreVentaStripe() {
            document.getElementById('preventa-modal').style.display = 'flex';
            document.getElementById('icarus-menu').style.display = 'none';
        }

        function closePreVentaModal() {
            document.getElementById('preventa-modal').style.display = 'none';
        }

        function closeModalOnOverlay(event, modalId) {
            if (event.target.classList.contains('modal-overlay')) {
                if (modalId === 'preventa-modal') closePreVentaModal();
                else closeContactoForm();
            }
        }

        function handleContactoSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {
                nombre: formData.get('nombre'),
                email: formData.get('email'),
                telefono: formData.get('telefono'),
                mensaje: formData.get('mensaje'),
                fecha: new Date().toISOString()
            };
            console.log('Datos de Contacto:', data);
            alert('¬°Gracias por contactarnos! Te responderemos pronto.');
            closeContactoForm();
            event.target.reset();
        }

        function openChatWidget() {
            const chatDiv = document.getElementById('chtl-inline-bot');
            if (chatDiv) {
                chatDiv.style.display = 'block';
                
                // Buscar todos los elementos relacionados con Chatling y moverlos
                setTimeout(function() {
                    const allChatElements = document.querySelectorAll('iframe[src*="chatling"], [id*="chtl"]:not(#chtl-inline-bot):not(#chtl-script)');
                    allChatElements.forEach(function(element) {
                        if (element.parentElement !== chatDiv && element.id !== 'chtl-script') {
                            chatDiv.appendChild(element);
                            element.style.cssText = 'width:100%!important;height:100%!important;display:block!important;position:relative!important;border:none!important;';
                        }
                    });
                }, 1000);
            }
        }

        // Cerrar men√∫ al clic fuera
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('icarus-menu');
            const trigger = event.target.closest('[onclick="toggleIcarusMenu()"]');
            if (!trigger && !menu.contains(event.target)) {
                menu.style.display = 'none';
            }
        });

        // Generaci√≥n de la esfera de puntos
        const pointCloud = document.getElementById('pointCloud');
        const numberOfPoints = 1400;
        const radius = Math.min(window.innerWidth, window.innerHeight) * 0.45;
        for (let i = 0; i < numberOfPoints; i++) {
            const point = document.createElement('div');
            point.classList.add('point');
            const phi = Math.acos(-1 + (2 * i) / numberOfPoints);
            const theta = Math.sqrt(numberOfPoints * Math.PI) * phi;
            const x = radius * Math.cos(theta) * Math.sin(phi);
            const y = radius * Math.sin(theta) * Math.sin(phi);
            const z = radius * Math.cos(phi);
            const size = Math.random() * 2.5 + 1.2;
            point.style.width = point.style.height = `${size}px`;
            point.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
            point.style.opacity = Math.random() * 0.8 + 0.4;
            pointCloud.appendChild(point);
        }

        // Mover el chat de Chatling al contenedor correcto cuando cargue
        window.addEventListener('load', function() {
            setTimeout(function() {
                const targetContainer = document.getElementById('chtl-inline-bot');
                const chatElements = document.querySelectorAll('iframe[src*="chatling"], [id*="chtl"][id*="widget"]');
                
                chatElements.forEach(function(element) {
                    if (element.id !== 'chtl-script' && element.id !== 'chtl-inline-bot') {
                        console.log('Moviendo elemento de chat:', element);
                        targetContainer.appendChild(element);
                        element.style.cssText = 'width:100%!important;height:100%!important;display:block!important;position:relative!important;border:none!important;';
                    }
                });
            }, 2000);
        });
    </script>

    <!-- Scripts de Chatling - AL FINAL para que cargue despu√©s -->
    <script>
        window.chtlConfig = {
            chatbotId: "7825123996"
        };
    </script>
    <script async data-id="7825123996" id="chtl-script" type="text/javascript" src="https://chatling.ai/js/embed.js"></script>

    <!-- Botones inferiores -->
    <div class="fixed bottom-12 left-8 right-8 flex justify-between items-center z-50 pointer-events-none">
        <button onclick="openChatWidget()" class="pointer-events-auto">
            <span class="text-2xl tracking-widest text-primary border-b-2 border-transparent hover:border-primary pb-1 transition glitch-hover">
                Lustig-IA
            </span>
        </button>
        <button onclick="openContactoForm()" class="pointer-events-auto">
            <span class="text-2xl tracking-widest text-primary border-b-2 border-transparent hover:border-primary pb-1 transition glitch-hover">
                Contacto
            </span>
        </button>
    </div>
</body>
</html>
