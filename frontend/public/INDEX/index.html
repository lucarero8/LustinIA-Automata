<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Αυτόματα Lustin-AI</title>
    <meta name="description" content="Automatización de gestión de cartera con IA avanzada."/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@200;300;400&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#00ff41",
                        textblue: "#00bfff",
                    },
                    fontFamily: {
                        display: ["'Share Tech Mono'", "monospace"],
                    }
                }
            }
        };
    </script>
    <style>
        body { margin:0; overflow:hidden; background:#000; height:100vh; }
        .energy-core {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0,255,65,1) 0%, rgba(0,255,65,0.6) 25%, rgba(0,255,65,0.25) 45%, rgba(0,255,65,0.05) 65%, transparent 70%);
            box-shadow: 0 0 40px rgba(0,255,65,0.9), 0 0 90px rgba(0,255,65,0.6);
            animation: pulseCore 4s ease-in-out infinite;
        }
        @keyframes pulseCore { 0%,100% { transform:scale(1); } 50% { transform:scale(1.08); } }
        .point { position:absolute; background:#00ff41; border-radius:50%; box-shadow:0 0 10px #00ff41; }
        .point-cloud { animation:rotateSphere 40s linear infinite; transform-style:preserve-3d; }
        @keyframes rotateSphere { from{transform:rotateY(0) rotateX(0);} to{transform:rotateY(360deg) rotateX(360deg);} }
        .glitch-hover:hover { animation:glitch 0.3s infinite; color:#00ff41; }
        @keyframes glitch { 0%{transform:translate(0)} 20%{transform:translate(-3px,3px)} 40%{transform:translate(3px,-3px)} 60%{transform:translate(-3px,3px)} 80%{transform:translate(3px,-3px)} 100%{transform:translate(0)} }
        #chtl-inline-bot {
            display:none;
            width:380px;
            height:520px;
            position:fixed;
            bottom:90px;
            left:16px;
            z-index:1000;
            background:rgba(0,0,0,0.95);
            border:2px solid #00ff41;
            border-radius:8px;
            box-shadow:0 0 30px rgba(0,255,65,0.5);
            overflow:hidden;
        }
        #chtl-inline-bot iframe {
            width:100% !important;
            height:100% !important;
            border:none;
        }
        #icarus-menu { display:none; position:fixed; top:60px; right:16px; background:rgba(0,0,0,0.95); border:2px solid #00ff41; border-radius:8px; padding:16px; z-index:1000; box-shadow:0 0 30px rgba(0,255,65,0.5); min-width:280px; }
        #icarus-menu ul { list-style:none; margin:0; padding:0; }
        #icarus-menu li { padding:10px 14px; border-bottom:1px solid rgba(0,255,65,0.2); cursor:pointer; transition:all 0.3s; }
        #icarus-menu li:hover { background:rgba(0,255,65,0.15); color:#00ff41; }
        #icarus-menu li:last-child { border-bottom:none; }
        .modal-overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:2000; align-items:center; justify-content:center; }
        .modal-content { background:#000; border:2px solid #00ff41; border-radius:8px; padding:32px; max-width:420px; width:92%; box-shadow:0 0 50px rgba(0,255,65,0.8); position:relative; }
        .modal-close { position:absolute; top:12px; right:16px; font-size:32px; cursor:pointer; color:#00ff41; transition:all 0.3s; }
        .modal-close:hover { transform:scale(1.2); }
        .form-input { width:100%; padding:12px; margin:12px 0; background:rgba(0,255,65,0.05); border:1px solid #00ff41; border-radius:4px; color:#fff; font-family:'Share Tech Mono', monospace; }
        .form-input:focus { outline:none; box-shadow:0 0 10px rgba(0,255,65,0.5); }
        .form-button { width:100%; padding:14px; margin-top:20px; background:#00ff41; color:#000; border:none; border-radius:4px; font-family:'Share Tech Mono', monospace; font-weight:bold; cursor:pointer; transition:all 0.3s; }
        .form-button:hover { box-shadow:0 0 20px rgba(0,255,65,0.9); transform:scale(1.02); }
    </style>
</head>
<body class="relative flex items-center justify-center h-screen w-screen text-white font-display">
    <!-- Logo L-IA superior izquierda -->
    <div class="absolute top-8 left-8 z-30 flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center border border-primary/50 shadow-[0_0_15px_rgba(0,255,65,0.6)]">
            <span class="text-2xl font-bold text-primary">L-IA</span>
        </div>
    </div>

    <!-- Icarus-IA Pre-Venta superior derecha -->
    <div class="absolute top-8 right-8 z-30 opacity-90 text-sm tracking-widest text-primary cursor-pointer hover:opacity-100 transition" onclick="toggleIcarusMenu()">
        IcarusIA <span class="text-[10px] opacity-70">PRE-VENTA</span> <span class="text-xs bg-primary/30 px-2 py-1 rounded-full">-30%</span>
    </div>

    <!-- Menú desplegable IcarusIA -->
    <div id="icarus-menu">
        <ul class="text-sm text-white">
            <li>En Desarollo</li>
            <li>AnchorPoints</li>
            <li>CRM / ERP</li>
            <li>Razonamiento Verbal</li>
            <li>Tests WAIS</li>
            <li>Migas de Pan</li>
            <li>InnerThoughts</li>
            <li>Self-Refinement</li>
            <li>Parallel Decoding</li>
            <li>Correferencia robusta</li>
            <li>Thread Rot</li>
            <li>Clasificación Activa</li>
            <li>Guardrails cognitivas (ABCD)</li>
            <li>Refresco manual</li>
        </ul>
    </div>

    <!-- Esfera central con núcleo pulsante -->
    <div class="relative w-full h-full max-w-5xl max-h-screen flex items-center justify-center pointer-events-none">
        <div class="energy-core"></div>
        <div class="point-cloud w-0 h-0 relative" id="pointCloud"></div>
        <h1 class="absolute z-10 text-center pointer-events-none">
            <span class="block text-5xl md:text-7xl tracking-[0.4em] text-textblue drop-shadow-[0_0_20px_rgba(0,191,255,0.9)]">
              
Αυτόματα Lustin-AI
            </span>
            <span class="block text-xl md:text-2xl mt-4 tracking-widest text-primary opacity-90">
                Analista de Ventas y Cuentas por Cobrar
            </span>
        </h1>
    </div>

    <!-- Contenedor del chat inline -->
    <div id="chtl-inline-bot"></div>

    <!-- Modal formulario Contacto -->
    <div id="contacto-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'contacto-modal')">
        <div class="modal-content">
            <span class="modal-close" onclick="closeContactoForm()">&times;</span>
            <h2 class="text-2xl text-primary text-center mb-6 tracking-widest">Contacto</h2>
            <form id="contacto-form" onsubmit="handleContactoSubmit(event)">
                <input type="text" name="nombre" placeholder="NOMBRE COMPLETO" class="form-input" required />
                <input type="email" name="email" placeholder="EMAIL" class="form-input" required />
                <input type="tel" name="telefono" placeholder="TELÉFONO" class="form-input" required />
                <button type="submit" class="form-button">ENVIAR</button>
            </form>
            <p class="text-center text-xs text-primary/70 mt-4">Te contactaremos a la brevedad</p>
        </div>
    </div>

    <!-- Modal Pre-Venta IcarusIA -->
    <div id="preventa-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'preventa-modal')">
        <div class="modal-content">
            <span class="modal-close" onclick="closePreVentaModal()">&times;</span>
            <h2 class="text-2xl text-primary text-center mb-6 tracking-widest">PRE-VENTA ICARUSIA</h2>
            <p class="text-center text-primary/80 mb-6">Descuento exclusivo del 30%</p>
            <div id="stripe-checkout" class="text-center">
                <button onclick="iniciarPreVenta()" class="form-button text-lg py-4">
                    COMPRAR AHORA (-30%)
                </button>
                <p class="text-xs text-primary/60 mt-6">
                    Pago seguro vía Stripe • Prueba activada
                </p>
            </div>
        </div>
    </div>

    <!-- Scripts de Chatling -->
    <script>
        window.chtlConfig = {
            chatbotId: "7825123996",
            display: "inline",
            target: "chtl-inline-bot"
        };
    </script>
    <script async data-id="7825123996" id="chtl-script" type="text/javascript" src="https://chatling.ai/js/embed.js"></script>

    <!-- Stripe.js (carga la librería oficial) -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Funciones JavaScript -->
    <script>
        // Inicializar Stripe con tu clave pública de TEST
        const stripe = Stripe('pk_test_51RoVJZDXgX8h2eEZPHB1jPbl4sRF44Rx17gRBNF6KEbwfvkmSPMem4hGGqyqLpjihv2Epm8G8OKPTaMhTDT4eTGj00LygWLDGh');

        function toggleIcarusMenu() {
            const menu = document.getElementById('icarus-menu');
            menu.style.display = menu.style.display === 'none' || menu.style.display === '' ? 'block' : 'none';
        }

        function openContactoForm() {
            document.getElementById('contacto-modal').style.display = 'flex';
        }

        function closeContactoForm() {
            document.getElementById('contacto-modal').style.display = 'none';
        }

        function openPreVentaStripe() {
            document.getElementById('preventa-modal').style.display = 'flex';
        }

        function closePreVentaModal() {
            document.getElementById('preventa-modal').style.display = 'none';
        }

        function closeModalOnOverlay(event, modalId) {
            if (event.target.classList.contains('modal-overlay')) {
                if (modalId === 'preventa-modal') closePreVentaModal();
                else closeContactoForm();
            }
        }

        function handleContactoSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {
                nombre: formData.get('nombre'),
                email: formData.get('email'),
                telefono: formData.get('telefono'),
                fecha: new Date().toISOString()
            };
            console.log('Datos de Contacto:', data);
            alert('¡Gracias por contactarnos! Te responderemos pronto.');
            closeContactoForm();
            event.target.reset();
        }

        function openChatWidget() {
            const chatDiv = document.getElementById('chtl-inline-bot');
            if (chatDiv) chatDiv.style.display = 'block';
        }

        // Función para iniciar pre-venta (versión placeholder - reemplazar con backend real)
        function iniciarPreVenta() {
            // Versión recomendada: Llama a tu backend que crea la sesión
            // Ejemplo con fetch a un endpoint propio:
            /*
            fetch('https://tu-backend.com/create-checkout-session', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ product: 'icarus-preventa' })
            })
            .then(res => res.json())
            .then(session => stripe.redirectToCheckout({ sessionId: session.id }))
            .catch(err => alert('Error: ' + err.message));
            */

            // Placeholder temporal (muestra alerta)
            alert('Redirigiendo a pago pre-venta...\n\n(Integración real requiere backend para crear sesión con sk_test_...)');
            // closePreVentaModal(); // Descomenta si quieres cerrar modal tras clic
        }

        // Cerrar menú al clic fuera
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('icarus-menu');
            const trigger = event.target.closest('[onclick="toggleIcarusMenu()"]');
            if (!trigger && !menu.contains(event.target)) {
                menu.style.display = 'none';
            }
        });

        // Generación de la esfera de puntos
        const pointCloud = document.getElementById('pointCloud');
        const numberOfPoints = 1400;
        const radius = Math.min(window.innerWidth, window.innerHeight) * 0.45;
        for (let i = 0; i < numberOfPoints; i++) {
            const point = document.createElement('div');
            point.classList.add('point');
            const phi = Math.acos(-1 + (2 * i) / numberOfPoints);
            const theta = Math.sqrt(numberOfPoints * Math.PI) * phi;
            const x = radius * Math.cos(theta) * Math.sin(phi);
            const y = radius * Math.sin(theta) * Math.sin(phi);
            const z = radius * Math.cos(phi);
            const size = Math.random() * 2.5 + 1.2;
            point.style.width = point.style.height = `${size}px`;
            point.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;
            point.style.opacity = Math.random() * 0.8 + 0.4;
            pointCloud.appendChild(point);
        }
    </script>

    <!-- Botones inferiores -->
    <div class="fixed bottom-12 left-8 right-8 flex justify-between items-center z-50 pointer-events-none">
        <button onclick="openChatWidget()" class="pointer-events-auto">
            <span class="text-2xl tracking-widest text-primary border-b-2 border-transparent hover:border-primary pb-1 transition glitch-hover">
                Lustin-IA
            </span>
        </button>
        <button onclick="openContactoForm()" class="pointer-events-auto">
            <span class="text-2xl tracking-widest text-primary border-b-2 border-transparent hover:border-primary pb-1 transition glitch-hover">
                Contacto
            </span>
        </button>
    </div>
</body>
</html>
